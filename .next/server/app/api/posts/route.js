"use strict";(()=>{var e={};e.id=990,e.ids=[990],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},41459:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>w,originalPathname:()=>Z,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>P});var r={};a.r(r),a.d(r,{DELETE:()=>DELETE,GET:()=>GET,POST:()=>POST,PUT:()=>PUT}),a(78976);var s=a(10884),n=a(16132),i=a(66e3),o=a(64551),u=a(95798);let GET=async e=>{let t=new URL(e.url),a=t.searchParams.get("id"),r=t.searchParams.get("username"),s=t.searchParams.get("rating");try{await (0,o.Z)();let e={};a?e={_id:a}:r?e={username:r}:s&&(e={rating:s});let t=await i.Z.find(e);return new u.Z(JSON.stringify(t),{status:200})}catch(e){return new u.Z("Database Error",{status:500})}},PUT=async e=>{let t=new URL(e.url),a=t.searchParams.get("id"),r=await e.text(),s=JSON.parse(r);try{await (0,o.Z)();let e=await i.Z.findById(a);if(!e)return new u.Z("Post not found",{status:404});return await i.Z.findByIdAndUpdate(a,s),new u.Z("Post has been updated",{status:200})}catch(e){return new u.Z("Database Error",{status:500})}},POST=async e=>{let t=await e.json(),a=new i.Z(t);try{return await (0,o.Z)(),await a.save(),new u.Z("Post has been created",{status:201})}catch(e){return new u.Z("Database Error",{status:500})}},DELETE=async e=>{let t=e.nextUrl.searchParams.get("id");try{await (0,o.Z)();let e=await i.Z.findByIdAndDelete(t);if(!e)return new u.Z("Post not found",{status:404});return new u.Z("Post has been deleted",{status:200})}catch(e){return new u.Z("Database Error",{status:500})}},d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/posts/route",pathname:"/api/posts",filename:"route",bundlePath:"app/api/posts/route"},resolvedPagePath:"D:\\level-2\\assignment\\event-planning\\think-best\\src\\app\\api\\posts\\route.js",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:c,serverHooks:l,headerHooks:w,staticGenerationBailout:P}=d,Z="/api/posts/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[6126,4933,6449,5798,5463],()=>__webpack_exec__(41459));module.exports=a})();